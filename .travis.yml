sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: DegyL3u81EQcCIl6zjmpcUbHkqtLO9jmzOogapomx1L+M514hinQ4P772Cs6xbvLgYVhIKdZ4XLm8M/fPgEwaOQPZm9HWVcS4bXjYNWo+xeZhYGgPH5EaIxD3Ztt9HOJVFduIc8SwnJo4u6BmYYboiWfHM8NOwTx/KYF/Ok/VPHGgAiYiBJP/dmhwITz++cATT4RZlrq2k7iDwet0CyUGkJKclWKZjIAlWn1/QYIvuscMVj0tbzXXoR6DfKGJ2utj4UsLT2PHOjqcGeA2oep+UWi8qTCs19qDktWKcWRVF33WnM70Wa22PHU5hwGe6tkRm3p23pxuW0jFCch/K+9tgq1VwoEIthJC6FGFK1thBi2jhxnnQuZh90bbWnwAYUeVm4Qo3f69q3LhAvs+TKbK5dhE86Ij1MGll1hmCdZIH49Fat1n3Y5PgLt1mNpj/l27xQXzgFXdVYq/stnTviRwvA9Z034+1DKnPU9PI1gFqxjZgIvmwfpRLrpgxhWBEnRHmoCtnZy3+ijxu3g7+AfCIZXFoSZUlMb2n6bDLdxcPpEJv1rUe0+uOVis/5p81kxg0pf2U1xVTZ8ihkCddNvf6bUVfpwupl7rfgCcBXr0VVftGZ+5QhJXWhCaaTYvbHIzfMLCKqLsTJwwXFXQrqv5gXpbOLN3ciCAlj9OnKEeWc=
  - secure: UCQesTjdJGdHi7RueWCOmy5c89erRZQkQljsV2cJPJTQ2wzsIK2/VpjuSG/g1dqQGOwQSk31GwGjdJDAtsB59cyPyExmHRCCVHUsfy7Ru3FigGobH5GnhkecKWA36v0sgvxzKsxSt6ZDgOp0htJ125NzVnBPhzM/PBxMOW5CB2jCc/xn8lFlKMuduLssLXvvJpyzWWC8Dvl/ZMOELxx/A3ErJBbOq8Zs4X+t1YlZjxo7PqKLdYzn4Fh9rjM1IqI7wdTJwJOW73NuGHdrF2Vtb4X5wvv+ce2AhRnz48i+GduqGax/GdBWM1+ZgBezGLqiO4U54MYEvJZl6u13OKJb8RBDwDxg+uxtYJV3shRPfj6o1MLpg4yFK5lQ+2w/M8D3rwKyccKY5rjsMkQKGnoiiE8q7r36oSw2RakihBnaKujGN3iKyGvJPZ5nAgejctDO5M+bMchKidJWQmN7nemVp/Tdymz5oP0oOAcK3Ac55vEvCgBhPCtth2G3cPCK3Oc5VICJKANEMutwYFBUQQM4lq55pBU+U4bvKZX7XkwDJDHLvo3d7TtmcwG7nDzTuJgljJW3vsKpD7qxlNpvPmBsOTggO9qxEDbekuarKNyUGJ0E3vGZsH326Pic7yoQuCzUMQe0mLZ/hEbdw5QT1/CY0BjPTxRNfnggCW/3ehVf9+0=
before_install:
  - openssl aes-256-cbc -k "$password" -in id_rsa.enc -out deploy_key -d
after_success:
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
